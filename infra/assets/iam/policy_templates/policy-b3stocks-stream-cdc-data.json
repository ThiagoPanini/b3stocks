{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DynamoDBStreamRead",
      "Effect": "Allow",
      "Action": [
        "dynamodb:DescribeStream",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:ListStreams"
      ],
      "Resource": [
        "arn:aws:dynamodb:${region_name}:${account_id}:table/${dynamodb_investment_portfolio_table_name}/stream/*",
        "arn:aws:dynamodb:${region_name}:${account_id}:table/${dynamodb_active_stocks_table_name}/stream/*"
      ]
    },
    {
      "Sid": "WriteObjectsToCDCBucket",
      "Effect": "Allow",
      "Action": [
        "s3:PutObject",
        "s3:AbortMultipartUpload"
      ],
      "Resource": [
        "arn:aws:s3:::${s3_analytics_cdc_bucket_name}/dynamodb/${dynamodb_investment_portfolio_cdc_table_name}/*",
        "arn:aws:s3:::${s3_analytics_cdc_bucket_name}/dynamodb/${dynamodb_active_stocks_cdc_table_name}/*"
      ]
    },
    {
      "Sid": "ListCDCBucket",
      "Effect": "Allow",
      "Action": [
        "s3:ListBucket"
      ],
      "Resource": "arn:aws:s3:::${s3_analytics_cdc_bucket_name}"
    },
    {
      "Sid": "GlueDataCatalogAccess",
      "Effect": "Allow",
      "Action": [
        "glue:GetTable",
        "glue:GetTables",
        "glue:GetDatabase",
        "glue:GetDatabases",
        "glue:CreateTable",
        "glue:UpdateTable",
        "glue:BatchCreatePartition",
        "glue:BatchDeletePartition",
        "glue:GetPartition",
        "glue:GetPartitions"
      ],
      "Resource": [
        "arn:aws:glue:${region_name}:${account_id}:catalog",
        "arn:aws:glue:${region_name}:${account_id}:database/${data_catalog_cdc_database_name}",
        "arn:aws:glue:${region_name}:${account_id}:table/${data_catalog_cdc_database_name}/${dynamodb_investment_portfolio_cdc_table_name}",
        "arn:aws:glue:${region_name}:${account_id}:table/${data_catalog_cdc_database_name}/${dynamodb_active_stocks_cdc_table_name}"
      ]
    }
  ]
}